<mat-card>
  <mat-card-title>Inscription</mat-card-title>
  <mat-card-content>
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <!-- Messages d'erreur globaux -->
      <p *ngIf="errorMessages?.length" class="error">
        {{ errorMessages.join(', ') }}
      </p>

      <!-- Nom d'utilisateur -->
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <mat-label>Nom d'utilisateur</mat-label>
        <input matInput id="username" formControlName="username" />
        <mat-error *ngIf="f['username'].touched && f['username'].errors?.['required']">
          Requis.
        </mat-error>
        <mat-error *ngIf="f['username'].touched && f['username'].errors?.['minlength']">
          Min 3 caractères.
        </mat-error>
        <mat-error *ngIf="f['username'].touched && f['username'].errors?.['maxlength']">
          Max 50 caractères.
        </mat-error>
      </mat-form-field>

      <!-- Email -->
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <mat-label>Email</mat-label>
        <input matInput type="email" id="email" formControlName="email" />
        <mat-error *ngIf="f['email'].touched && f['email'].errors?.['required']">
          Requis.
        </mat-error>
        <mat-error *ngIf="f['email'].touched && f['email'].errors?.['email']">
          Format email invalide.
        </mat-error>
        <mat-error *ngIf="f['email'].touched && f['email'].errors?.['maxlength']">
          Max 100 caractères.
        </mat-error>
      </mat-form-field>

      <!-- Mot de passe -->
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <mat-label>Mot de passe</mat-label>
        <input matInput id="password" type="password" formControlName="password" />
        <!-- Si tu veux un indicateur de force de mot de passe, il faudra un composant dédié -->
        <mat-error *ngIf="f['password'].touched && f['password'].errors?.['required']">
          Requis.
        </mat-error>
        <mat-error *ngIf="f['password'].touched && f['password'].errors?.['minlength']">
          Min 6 caractères.
        </mat-error>
      </mat-form-field>

      <!-- Prénom -->
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <mat-label>Prénom</mat-label>
        <input matInput id="firstName" formControlName="firstName" />
      </mat-form-field>

      <!-- Nom -->
      <mat-form-field appearance="outline" class="w-100" color="primary">
        <mat-label>Nom</mat-label>
        <input matInput id="lastName" formControlName="lastName" />
      </mat-form-field>

      <!-- Bouton S'inscrire -->
      <button mat-flat-button color="primary" class="w-100" type="submit"
              [disabled]="registerForm.invalid || isLoading">
        S'inscrire
      </button>

      <!-- Lien vers la connexion -->
      <div class="text-center mt-3">
        <span>Déjà un compte ? </span>
        <a routerLink="/login" class="text-primary">Connectez-vous</a>
      </div>

    </form>
  </mat-card-content>
</mat-card>
