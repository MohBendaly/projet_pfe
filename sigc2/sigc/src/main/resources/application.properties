spring.application.name=sigc
# ===============================
# DATABASE CONFIGURATION
# ===============================
# Utiliser des variables d'environnement pour les donn\uFFFDes sensibles en production
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/recruitment_db}
spring.datasource.username=postgres
spring.datasource.password=mohamed
spring.datasource.driver-class-name=org.postgresql.Driver

# ===============================
# JPA / HIBERNATE CONFIGURATION
# ===============================
spring.jpa.hibernate.ddl-auto=update
  # 'validate' ou 'none' en production
spring.jpa.show-sql=true

spring.config.activate.on-profile=production
  # Mettre \uFFFD false en production
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===============================
# SERVER CONFIGURATION
# ===============================
server.port=8080
# server.error.include-stacktrace=never # Ne pas inclure la stacktrace dans les r\uFFFDponses d'erreur en prod
server.address=0.0.0.0

spring.mvc.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:4200}
# ===============================
# FILE STORAGE CONFIGURATION
# ===============================
file.upload-dir=C:/data/sigc/uploads
    # Chemin relatif au r\uFFFDpertoire de lancement de l'application
# Pourrait \uFFFDtre un chemin absolu: /var/data/sigc/uploads
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===============================
# SECURITY CONFIGURATION (Exemple JWT - \uFFFD adapter)
# ===============================
# jwt.secret=VotreSecretTresTresLongEtSecuriseACacherAbsolumentEnProd # A METTRE DANS LES VARIABLES D'ENV
# jwt.expiration.ms=86400000 # 24 heures

# ===============================
# DEEPSEEK API CONFIGURATION
# ===============================
#deepseek.api.url=${DEEPSEEK_API_URL:https://api.deepseek.com}
#deepseek.api.key=${DEEPSEEK_API_KEY:sk-bab67a8341924c68b1c64ca0cb51bdf9}
#deepseek.model.chat=${DEEPSEEK_CHAT_MODEL:deepseek-chat}
   # Nom du mod\uFFFDle \uFFFD utiliser


# ===============================
# GOOGLE AI (GEMINI) CONFIGURATION
# ===============================
spring.config.activate.on-profile=production
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.connection-timeout=30000

spring.datasource.hikari.maximum-pool-size=5
spring.datasource.initialization-mode=never
spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.show-sql=false

# Délai pour Hikari
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.initialization-fail-timeout=120000
# Option 1: Cl\uFFFD API de Google AI Studio (plus simple)
google.gemini.api.key=${GEMINI_API_KEY:AIzaSyBlB2T54sexBFg8nmsZ1KG8RSjrtQlQRlk}
google.gemini.model.chat=gemini-1.5-flash
# Option 2: Configuration pour Vertex AI (plus complexe, utilise ADC ou compte de service)
# google.vertex.project-id=${GOOGLE_PROJECT_ID}
# google.vertex.location=us-central1 # Ou votre r\uFFFDgion
# google.vertex.model.chat=gemini-1.0-pro-001 # Ou un autre mod\uFFFDle Vertex AI

# URL de l'API (utile si vous utilisez WebClient)
google.gemini.api.baseurl=https://generativelanguage.googleapis.com/v1beta/models/
# Pour Vertex AI, l'URL est diff\uFFFDrente et souvent construite dynamiquement par la lib cliente
# Ex: https://us-central1-aiplatform.googleapis.com/v1/projects/YOUR_PROJECT_ID/locations/us-central1/publishers/google/models/gemini-1.0-pro:generateContent
# ===============================
# SPRINGDOC / SWAGGER CONFIGURATION
# ===============================
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha

# ===============================
# CACHE CONFIGURATION (Redis exemple)
# ===============================
# spring.cache.type=redis
# spring.data.redis.host=localhost
# spring.data.redis.port=6379
# spring.data.redis.password= # Mettre un mot de passe si configur\uFFFD

# ===============================
# LOGGING
# ===============================
logging.level.root=INFO
logging.level.com.mohamedbendali.sigc=DEBUG
  # Plus de logs pour votre code
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=DEBUG
   # Si show-sql=false mais vous voulez voir les requ\uFFFDtes (attention volumineux)
logging.level.org.hibernate.type.descriptor.sql=TRACE
  # Voir les param\uFFFDtres bind\uFFFDs dans les requ\uFFFDtes
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web.filter.SecurityContextPersistenceFilter=DEBUG
# Ajoutez d'autres filtres si n\uFFFDcessaire pour le d\uFFFDbogage
jwt.secret=MonSuperSecretTresTresLongQuiFaitPlusDe32CaracteresPourHS256Example
spring:
  mvc:
    cors:
      allowed-origins: "https://votre-angular.onrender.com,http://localhost:4200"
      allowed-methods: "GET,POST,PUT,DELETE,OPTIONS"
      allowed-headers: "*"
      allow-credentials: true
# Exposition des endpoints Actuator (au minimum 'health')
management.endpoints.web.exposure.include=health,info
# Optionnel : afficher les détails (comme l'état de la base de données)
spring.security.enabled=true
management.endpoint.health.show-details= always

# Health check settings
management.endpoint.health.probes.enabled=true
management.health.db.enabled=false  # Désactiver au démarrage
